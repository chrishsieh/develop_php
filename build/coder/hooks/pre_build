#!/bin/bash
if [[ "$(docker images -q ${DOCKER_REPO}:coder${CODER_VERSION} 2> /dev/null)" == "" ]]; then
echo "=> No need build"
else
echo "=> Building the coder"
docker build --build-arg CODER_VERSION=$CODER_VERSION -t $DOCKER_REPO:coder -t $DOCKER_REPO:coder$CODER_VERSION - < ${PWD}/coder-gen/Dockerfile
docker push $DOCKER_REPO:coder
docker push $DOCKER_REPO:coder$CODER_VERSION
fi
